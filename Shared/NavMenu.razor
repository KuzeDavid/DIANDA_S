@inject NavegacionService navegacionService

<style>
    .icono-radzen {
        vertical-align: middle;
    }

    /*slider*/
    .checkbox-wrapper input[type="checkbox"] {
        visibility: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .checkbox-wrapper span {
        color: aquamarine;
    }

    .checkbox-wrapper *,
    .checkbox-wrapper ::after,
    .checkbox-wrapper ::before {
        box-sizing: border-box;
        user-select: none;
    }

    .checkbox-wrapper {
        position: relative;
        display: block;
        overflow: hidden;
    }

        .checkbox-wrapper .label {
            cursor: pointer;
        }

        .checkbox-wrapper .check {
            width: 50px;
            height: 50px;
            position: absolute;
            opacity: 0;
        }

        .checkbox-wrapper .label svg {
            vertical-align: middle;
        }

        .checkbox-wrapper .path1 {
            stroke-dasharray: 400;
            stroke-dashoffset: 400;
            transition: .5s stroke-dashoffset;
            opacity: 0;
        }

        .checkbox-wrapper .check:checked + label svg g path {
            stroke-dashoffset: 0;
            opacity: 1;
        }

</style>

<div class="top-row pl-4 navbar navbar-dark">
    <a class="navbar-brand" href="">DIANDA</a>
    <button class="navbar-toggler" @onclick="ToggleNavMenu">
        <span class="navbar-toggler-icon"></span>
    </button>
</div>

<div class="@NavMenuCssClass" @onclick="ToggleNavMenu">
    <ul class="nav flex-column">
        <!--<div class="nav-item px-3">
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                <span class="oi oi-home" aria-hidden="true"></span> Home
            </NavLink>
        </div>-->
        
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="formulario">
                <div><RadzenIcon class="icono-radzen" Icon="assignment" /><span>Formulario</span></div>
            </NavLink>
        </div>
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="Perfil">
                <div><RadzenIcon class="icono-radzen" Icon="account_circle" /><span>Perfil</span></div>
            </NavLink>
        </div>
        <!--Vista solo profesor-->
        @if (!navegacionService.Alumno)
        {
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="HorarioyMateriales">
                <div><RadzenIcon class="icono-radzen" Icon="alarm" /><span>Horario y materiales</span></div>
            </NavLink>
        </div>
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="/GestionProfe">
                <div><RadzenIcon class="icono-radzen" Icon="accessibility" /><span>Gestion alumnado</span></div>
            </NavLink>
        </div>
            <!--Vista general (Solo alumnos)-->
        }
        @if (navegacionService.Alumno)
        {
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="/Tutores">
                <div><RadzenIcon class="icono-radzen" Icon="accessibility" /><span>Mentores</span></div>
            </NavLink>
        </div>
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="/resultado/{resultado}">
                <div><RadzenIcon class="icono-radzen" Icon="assignment_turned_in" /><span>Resultados</span></div>
            </NavLink>
        </div>
        }

        <!--
            Lo siguiente solo esta para cambiar entre un estudiante y un alumno
        -->
        <div class="px-3">
            <div class="checkbox-wrapper">
                <input checked="@navegacionService.Alumno" type="checkbox" class="check" id="check1-61" @onchange="ToggleImagen">
                <label for="check1-61" class="label">
                    <svg width="45" height="45" viewBox="0 0 95 95">
                        <rect x="30" y="20" width="50" height="50" stroke="black" fill="none"></rect>
                        <g transform="translate(0,-952.36222)">
                            <path d="m 56,963 c -102,122 6,9 7,9 17,-5 -66,69 -38,52 122,-77 -7,14 18,4 29,-11 45,-43 23,-4" stroke="black" stroke-width="3" fill="none" class="path1"></path>
                        </g>
                    </svg>
                    <span>¿Alumno?</span>
                </label>
            </div>
        </div>

    </ul>
</div>

@code {
    private bool collapseNavMenu = true;

    private string NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }

    private void ToggleImagen(ChangeEventArgs args)
    {
        navegacionService.CambiarMostrarImagen((bool)args.Value);
    }

    protected override void OnInitialized()
    {
        navegacionService.OnMostrarImagenChange += ActualizarVisibilidadImagen;
    }

    private void ActualizarVisibilidadImagen()
    {
        StateHasChanged();
    }
}
